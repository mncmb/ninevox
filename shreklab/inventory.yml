# based on https://github.com/jborean93/ansible-windows/blob/master/vagrant/inventory.yml
# scriptX keys can be named anything, it doesn't matter - only path (and args) subkeys are used
all:
  children: #TODO children can be removed since no more ansible in use
    domain:
      hosts:
        router: # first box deployed, so that subnets do exist for all other machines
          vagrant_box: ubuntu/focal64
          cpus: 1
          memory: 512
          gui: false
          modifyvm:
            # Network Interface nic1 being NAT seems to be required for Virtualbox to work correctly
            nic2: ["--nic2", "natnetwork"]
            nat-network2: ["--nat-network2", "ShrekNat"] # when changing iface Name, also change vars.net_adapter
            nic3: ["--nic3", "intnet"]
            intnet3: ["--intnet3", "Internal1"] 
            nic4: ["--nic4", "intnet"]
            intnet4: ["--intnet4", "Internal2"]
          scripts:
            script1: 
              path: powershell/router/fwconf.sh
              reload: true # reload so options are applied correctly
        dc01:
          vagrant_box: gusztavvargadr/windows-server
          linked_clone: true # supposedly speeds up testing - can be removed later
          winrm_plain: true # necessary option that gets checked so that dc provisioning works in vagrant
          cpus: 2
          memory: 3600
          # host_ip ===> DC IP is set in VARS, see further below
          modifyvm:
            nic2: ["--nic2", "intnet"] 
            intnet2: ["--intnet2", "Internal2"]
            audio: ["--audio", "dsound"]
            audioctrl: ["--audiocontroller", "hda"]
            audioout: ["--audioout", "on"]
          scripts:
            script1: 
              path: powershell/dc/01_create-domain.ps1
              reload: true
            script2: 
              path: powershell/dc/02_setup-dc.ps1
            script3: 
              path: powershell/dc/03_customize-admin.ps1
              reload: true
        fs01:
          vagrant_box: gusztavvargadr/sql-server
          linked_clone: true
          cpus: 2
          memory: 3600
          host_ip: 10.0.9.20
          scripts:
            script1: 
              path: powershell/join-domain.ps1
              #args: ["100","110"]
            script2: 
              path: powershell/fs/setup-fssql.ps1
        srv01:
          vagrant_box: gusztavvargadr/windows-server-core
          host_ip: 10.0.9.25
          gui: false
          scripts:
            script1: 
              path: powershell/join-domain.ps1
            script2:
              path: powershell/srv/setup-iis.ps1
        web01: # first box deployed, so that subnets do exist for all other machines
          vagrant_box: ubuntu/focal64
          host_ip: 172.16.0.10
          cpus: 1
          memory: 1024
          gui: false
          modifyvm:
            nic2: ["--nic2", "intnet"] 
            intnet2: ["--intnet2", "Internal1"]
          scripts:
            script1: 
              path: powershell/web/setup-web.sh
        #ws101:
        #  vagrant_box: gusztavvargadr/windows-10
        #  linked_clone: true 
        #  host_ip: 10.0.9.101
        #  scripts:
        #    script1: 
        #      path: powershell/join-domain.ps1
        #      args: ["100"]
    # control:
    #   hosts:
    #     ansible:
    #       vagrant_box: ubuntu/jammy64
    #       linked_clone: true 
    #       host_ip: 10.0.9.150
    #       cpus: 2
    #       memory: 2048
  vars:
    # these are default values for hosts, you can override them in the host-specific config above
    default_host:
      cpus: 1
      memory: 2096
      boot_timeout: 600
      timeout: 600
      modifyvm:
        nic2: ["--nic2", "intnet"] 
        intnet2: ["--intnet2", "Internal2"]
    # environemnt vars
    VAGRANT_DOMAIN_NAME: sh.rek.lab
    VAGRANT_PRIMARY_IFACE: "Ethernet 2"
    VAGRANT_DC_IP: 10.0.9.10
    VAGRANT_DA_NAME: shrek
    VAGRANT_DA_PASS: Swamp2023!
    VAGRANT_USER_NAME: donkey
    VAGRANT_USER_PASS: Passw0rd!
    VAGRANT_SAFEMODE_PASS: "MuCh_S3cUr3,_v3Ry_P@ssW0rD!"
    ansible_user: vagrant
    ansible_password: vagrant
    ansible_port: 5985
    ansible_connection: winrm
    ansible_winrm_transport: basic
    ansible_winrm_server_cert_validation: ignore
    net_adapter: "ShrekNat"
    dhcp_range: "192.168.55.0/24"
