# based on https://github.com/jborean93/ansible-windows/blob/master/vagrant/inventory.yml
# scriptX keys can be named anything, it doesn't matter - only path (and args) subkeys are used
all:
  children:
    domain:
      hosts:
        dc01:
          vagrant_box: gusztavvargadr/windows-server
          linked_clone: true # supposedly speeds up testing - can be removed later
          winrm_plain: true
          #ansible_host: 10.0.2.100
          cpus: 2
          memory: 4096
          # default winrm tries are 20, larger value needed for domain deployment
          scripts:
            script1: 
              path: powershell/dc/01_create-domain.ps1
              args: ["100","100"]
              reload: true
            script2: 
              path: powershell/dc/02_setup-dc.ps1
        fs01:
          vagrant_box: gusztavvargadr/windows-server
          linked_clone: true
          #ansible_host: 10.0.2.110
          cpus: 2
          memory: 2096
          scripts:
            script1: 
              path: powershell/join-domain.ps1
              args: ["100","110"]
        ws01001:
          vagrant_box: gusztavvargadr/windows-10
          linked_clone: true 
          #ansible_host: 10.0.2.21
          scripts:
            script1: 
              path: powershell/join-domain.ps1
              args: ["100"]
    # control:
    #   hosts:
    #     ansible:
    #       vagrant_box: ubuntu/jammy64
    #       linked_clone: true 
    #       ansible_host: 10.0.2.150
    #       cpus: 2
    #       memory: 2048
  vars:
    # these are default values for hosts, you can override them in the host-specific config above
    default_host:
      cpus: 1
      memory: 2096
      boot_timeout: 600
      timeout: 600
      iface: "Ethernet 2"
      dc_ip_dns: 10.0.2.100
    env:
      key1:
        key: VAGRANT_DOMAIN_NAME
        value: sh.rek.lab
      key2:
        key: VAGRANT_PRIMARY_INTERFACE
        value: "Ethernet 2"
    safemodeAdminPW: "S3cUr3P@ssW0rD!"
    ansible_user: vagrant
    ansible_password: vagrant
    ansible_port: 5985
    ansible_connection: winrm
    ansible_winrm_transport: basic
    ansible_winrm_server_cert_validation: ignore
    users:
      admin1:
        name: shrek
        pass: Swamp2023!
      user1:
        name: donkey
        pass: Passw0rd!
        description: "COME HERE, DONKEY!"

    # each protocol and host have their own port forward
    # the starting IP range (in thousands) is the 'host' variable
    # we add the host portion of the IP address to this e.g. dc01: rdp port is 20010, winrm is 22010, etc
    # we are theoretically maxed at a single network since a .10 on one network would clash with a .10 on another
    vagrant_ports:
      rdp:
        guest: 3389
        host: 30000
      ssh:
        guest: 22
        host: 31000
      winrm_http:
        guest: 5985
        host: 32000
      winrm_https:
        guest: 5986
        host: 33000
      smb:
        guest: 445
        host: 34000
